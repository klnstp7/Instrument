function WrapTables4Dom() { var a = "100%", b = !0, c = !1, d = "", e = 25, f = !0; return 1 == arguments.length ? WrapTables4DomDefault(arguments[0], b, a, c, d, e, f) : 2 == arguments.length ? WrapTables4DomDefault(arguments[0], arguments[1], a, c, d, e, f) : 3 == arguments.length ? WrapTables4DomDefault(arguments[0], arguments[1], arguments[2], c, d, e, f) : 4 == arguments.length ? WrapTables4DomDefault(arguments[0], arguments[1], arguments[2], arguments[3], d, e, f) : 5 == arguments.length ? WrapTables4DomDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], e, f) : 6 == arguments.length ? WrapTables4DomDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5], f) : 7 == arguments.length ? WrapTables4DomDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5], arguments[6]) : void 0 } function WrapTables4DomDefault(a, b, c, d, e, f, g) { setTableWidth(a, c); var h = $("#" + a).dataTable({ bJQueryUI: !0, bAutoWidth: !1, scrollX: !0, sScrollY: e, bStateSave: d, bPaginate: b, bLengthChange: b, sPaginationType: "full_numbers", iDisplayLength: f, bFilter: g, oLanguage: { sLengthMenu: "每页 _MENU_ 条", sZeroRecords: "sorry - 没有您要搜索的内容", sInfo: "共 _TOTAL_ 条记录", sInfoEmpty: "查找结果为 0", sInfoFiltered: "(原始记录_MAX_条)", sSearch: "搜索All：", oPaginate: { sFirst: "首页", sPrevious: "上一页", sNext: "下一页", sLast: "尾页"} }, sProcessing: "数据正在加载中...", sInfoPostFix: "" }); return rowSelectedCSS(h), h } function WrapTables4Ajax() { var a = "100%", b = "", c = !0, d = !1, e = 25, f = !0; return 2 == arguments.length ? WrapTables4AjaxDefault(arguments[0], arguments[1], a, c, b, d, e, f) : 3 == arguments.length ? WrapTables4AjaxDefault(arguments[0], arguments[1], arguments[2], c, b, d, e, f) : 4 == arguments.length ? WrapTables4AjaxDefault(arguments[0], arguments[1], arguments[2], arguments[3], b, d, e, f) : 5 == arguments.length ? WrapTables4AjaxDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], d, e, f) : 6 == arguments.length ? WrapTables4AjaxDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5], e, f) : 7 == arguments.length ? WrapTables4AjaxDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5], arguments[6], f) : 8 == arguments.length ? WrapTables4AjaxDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5], arguments[6], arguments[7]) : void 0 } function WrapTables4AjaxDefault(a, b, c, d, e, f, g, h) { setTableWidth(a, c), "auto" == e && (e = $(window).height() - $("#" + a).offset().top - 95 + "px"); var i = $("#" + a).dataTable({ bJQueryUI: !0, bAutoWidth: !1, scrollX: !0, bStateSave: f, sScrollY: e, bPaginate: d, bLengthChange: d, sPaginationType: "full_numbers", iDisplayLength: g, ajax: b, bFilter: h, oLanguage: { sLengthMenu: "每页 _MENU_ 条", sZeroRecords: "sorry - 没有您要搜索的内容", sInfo: "共 _TOTAL_ 条记录", sInfoEmpty: "查找结果为 0", sInfoFiltered: "(原始记录_MAX_条)", sSearch: "搜索All：", oPaginate: { sFirst: "首页", sPrevious: "上一页", sNext: "下一页", sLast: "尾页"} }, sProcessing: "数据正在加载中...", sInfoPostFix: "" }); return rowSelectedCSS(i), i } function WrapTables4JsArray() { var a = "", b = "100%", c = !0, d = !1, e = 25; return 2 == arguments.length ? WrapTables4JsArrayDefault(arguments[0], arguments[1], b, c, a, d, e) : 3 == arguments.length ? WrapTables4JsArrayDefault(arguments[0], arguments[1], arguments[2], c, a, d, e) : 4 == arguments.length ? WrapTables4JsArrayDefault(arguments[0], arguments[1], arguments[2], arguments[3], a, d, e) : 5 == arguments.length ? WrapTables4JsArrayDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], d, e) : 6 == arguments.length ? WrapTables4JsArrayDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5], e) : 7 == arguments.length ? WrapTables4JsArrayDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5], arguments[6]) : void 0 } function WrapTables4JsArrayDefault(a, b, c, d, e, f, g) { setTableWidth(a, c), "auto" == e && (e = $(window).height() - $("#" + a).offset().top - 100 + "px"); var h = $("#" + a).dataTable({ bJQueryUI: !0, bAutoWidth: !1, scrollX: !0, bStateSave: f, sScrollY: e, bPaginate: d, bLengthChange: d, sPaginationType: "full_numbers", iDisplayLength: g, aaData: b, oLanguage: { sLengthMenu: "每页 _MENU_ 条", sZeroRecords: "sorry - 没有您要搜索的内容", sInfo: "共 _TOTAL_ 条记录", sInfoEmpty: "查找结果为 0", sInfoFiltered: "(原始记录_MAX_条)", sSearch: "搜索All：", oPaginate: { sFirst: "首页", sPrevious: "上一页", sNext: "下一页", sLast: "尾页"} }, sProcessing: "数据正在加载中...", sInfoPostFix: "" }); return rowSelectedCSS(h), h } function GetJsondataFromServ() { var e, f, g, h, i, a = "100%", b = null, c = {}; return c.ColNum = 4, e = "", f = !0, g = !0, h = !1, i = !0, 2 == arguments.length ? GetJsondataFromServDefault(arguments[0], arguments[1], a, b, c, e, g, h, i, f) : 3 == arguments.length ? GetJsondataFromServDefault(arguments[0], arguments[1], arguments[2], b, c, e, g, h, i, f) : 4 == arguments.length ? GetJsondataFromServDefault(arguments[0], arguments[1], arguments[2], arguments[3], c, e, g, h, i, f) : 5 == arguments.length ? GetJsondataFromServDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], e, g, h, i, f) : 6 == arguments.length ? GetJsondataFromServDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5], g, h, i, f) : 7 == arguments.length ? GetJsondataFromServDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5], arguments[6], h, i, f) : 8 == arguments.length ? GetJsondataFromServDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5], arguments[6], arguments[7], i, f) : 9 == arguments.length ? GetJsondataFromServDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5], arguments[6], arguments[7], arguments[8], f) : 10 == arguments.length ? GetJsondataFromServDefault(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5], arguments[6], arguments[7], arguments[8], arguments[9]) : void 0 } function GetJsondataFromServDefault(a, b, c, d, e, f, g, h, i, j) { var k, l, m, n, p, q, r, s, t; return setTableWidth(a, c), k = g || j ? 100 : 72, l = $("#" + a).offset().top, m = $(window).height(), "auto" == f && (f = m - l - k + "px"), n = $("#" + a + "AVSearch").length > 0 ? !1 : !0, null != e && null != e.IsRLType && 1 == e.IsRLType && n && (p = $("#" + a), q = p.parent().html(), r = '<div id="' + a + 'AVSearch" style="float: left"></div><div id="' + a + 'AVScroll" IsExtend="true" ContentChangeWidth="0" style="border-right:4px solid #0997F7; width:1px; cursor:e-resize;float: left;" ondblclick="fnChangeSearchWidth(\'' + a + "')\"></div>", s = '<div id="' + a + 'AVContent" style="float:left">' + q + "</div>", p.parent().html(r + s)), t = $("#" + a).dataTable({ bJQueryUI: !0, sPaginationType: "full_numbers", bAutoWidth: !1, bLengthChange: !1, scrollX: !0, bStateSave: i, bPaginate: j, bLengthChange: j, sScrollY: f, bFilter: g, bDestroy: !0, iDisplayLength: 25, oLanguage: { sLengthMenu: "每页 _MENU_ 条", sZeroRecords: "sorry - 没有您要搜索的内容", sInfo: "共 _TOTAL_ 条记录", sInfoEmpty: "查找结果为 0", sInfoFiltered: "(原始记录_MAX_条)", sSearch: "搜索：", oPaginate: { sFirst: "首页", sPrevious: "上一页", sNext: "下一页", sLast: "尾页"} }, bSort: h, sProcessing: !0, bServerSide: !0, aoColumns: d, sAjaxSource: b }), rowSelectedCSS(t), n && null != d && (null == e || null == e.IsRLType || 0 == e.IsRLType ? advancedSearch(a, t, d, e) : advancedSearch4LR(a, t, d, e, m), t.extend({ fnGetAdvCondition: function (a) { var d, b = AddAdvanceSearchCondition(a), c = ""; for (d = 0; d < b.Name.length; d++) d > 0 && (c += "&"), c += b.Name[d] + "=" + encodeURI(b.Value[d]); return c + b.ParamsStr } }), t.extend({ reloadData: function () { t.api().ajax.reload() } })), t } function fnChangeSearchWidth(a) { var b = $("#" + a + "AVScroll"), c = $("#" + a + "AVContent"), d = $("#" + a), e = b.attr("IsExtend"), f = $("#" + a + "AVContent").width(); "true" == e ? (b.attr("IsExtend", "false"), $("#" + a + "AVSearch").hide(), d.width() < f + avSearchWidth && (b.attr("ContentChangeWidth", f + avSearchWidth - d.width()), $("table[role='grid']").width(f + avSearchWidth)), c.width(f + avSearchWidth)) : (b.attr("IsExtend", "true"), $("#" + a + "AVSearch").show(), c.width(f - avSearchWidth), b.attr("ContentChangeWidth") > 0 && d.width(d.width() - b.attr("ContentChangeWidth"))) } function setTableWidth(a, b) { var d, c = $(window).width(); "100%" != b && c > parseInt(b.replace("px;", "").replace("px", "")) && (d = $("#" + a).offset().left, b = c - d - 3 + "px;"), $("#" + a).removeAttr("style"), $("#" + a).attr("style", "width: " + b) } function rowSelectedCSS(a) { $(a).dataTable().on("click", "tr", function () { $(this).hasClass("row_selected") ? $(this).removeClass("row_selected") : (a.$("tr.row_selected").removeClass("row_selected"), $(this).addClass("row_selected")) }) } function advancedSearch(a, b, c, d) { var g, h, i, j, k, m, n, o, p, q, r, s, t, u, e = $("#" + a + "_filter"); for (e.parent().html(), g = "<div id='divAVsearch' style='float:right; display:none;'><input type='button' id='btnAdvanceReSet' class='submit_btn' value='重置' /><input type='button' id='btnAdvanceSearch' class='submit_btn' value='查询' /><input type='hidden' id='myAdVanceSearchCondition' name='myAdVanceSearchCondition' value='' /></div>", h = "<div style='float:left; padding: 5px 15px;'> <a id='btnShowSearch' href='#' onclick='showSearch(\"" + a + "\");'>高级查询</a><input type='hidden' id='txtShowSearch' value='0' /> </div>", h += "<input type='hidden' id='OriginalUrlStr' value='' />", i = "<div style='display:none;clear:both;' id='divSearch' >", i += "<table>", null == d && (d = {}), null == d.ColNum && (d.ColNum = 4), j = d.ColNum, k = 0, m = " style='width:240px;'", n = "", o = 0; o < c.length; o++) if (p = $.trim(c[o].sName), "" != p || null != c[o].expression && "" != c[o].expression) { if ("" == p && (p = "advancedSearch" + ("" + o)), q = c[o].sType, r = c[o].searchDataSource, n = null == c[o].aliasTitle || "" == c[o].aliasTitle ? c[o].sTitle : c[o].aliasTitle, 0 == k % j && (i += "<tr>"), i += "<td>" + n + ":</td>", null != r) { for (i += "<td" + m + "><select id='search" + p + "' name='search" + p + "' class='SearchInput' >", s = 0; s < r.length; s++) i += "<option value='" + r[s].sValue + "'>" + r[s].sTitle + "</option>"; i += "</select>" } else "int" == q ? (i += "<td" + m + "><input id='search" + p + "Start'  class='SearchInput' name='search" + p + "Start' type='number'  style='width:82px;' />至", i += "<input id='search" + p + "End'  class='SearchInput' name='search" + p + "End' type='number' style='width:82px;' /></td>") : "date" == q ? (i += "<td" + m + ">", i += '<input id="search' + p + 'Start" name="search' + p + 'Start" type="text" style="width:84px;" class="Wdate SearchInput" onfocus="WdatePicker({isShowClear:true,readOnly:true,maxDate:\'#F{$dp.$D(\\\'search' + p + "End\\',{d:-0})}'})\" ></input>至", i += '<input id="search' + p + 'End" name="search' + p + 'End" type="text" style="width:84px;" class="Wdate SearchInput" onfocus="WdatePicker({isShowClear:true,readOnly:true,minDate:\'#F{$dp.$D(\\\'search' + p + "Start\\',{d:+0})}'})\" ></input></td>") : i += "<td" + m + "><input id='search" + p + "' class='SearchInput' name='search" + p + "' type='text' style='width:184px;' /></td>"; k % j == j - 1 && (i += "</tr>"), k++ } for (t = (k + 1) % j, u = 0; t > u; u++) i += "<td></td><td></td>"; 0 != t && (i += "</tr>"), i += "</table></div>", e.parent().append(h + g + i), addAdvanceSearchClick(c, b) } function advancedSearch4LR(a, b, c, d, e) { var f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x; for (null == d.ColNum && (d.ColNum = 4), f = $(window).width(), g = $("#" + a + "AVSearch").offset().top, h = e - g, $("#" + a + "AVSearch").height(h), $("#" + a + "AVSearch").width(avSearchWidth), $("#" + a + "AVSearch").css("overflow", "auto"), $("#" + a + "AVContent").height(h), $("#" + a + "AVContent").width(f - avSearchWidth - 5), $("#" + a + "AVContent").css("overflow", "auto"), $("#" + a + "AVScroll").height(h), i = $("#" + a + "AVSearch"), j = "<div id='divAVsearch' style='float:right;'><input type='button' id='btnAdvanceReSet' class='submit_btn' value='重置' /><input type='button' id='btnAdvanceSearch' class='submit_btn' value='查询' /><input type='hidden' id='myAdVanceSearchCondition' name='myAdVanceSearchCondition' value='' /></div>", k = "<input type='hidden' id='OriginalUrlStr' value='' />", l = "<div style='clear:both;' id='divSearch' >", l += "<table class='form_table' style='width:242px;' >", l += "<tr><td colspan='" + 2 * d.ColNum + "'>", l += j, l += k, l += "</td></tr>", m = d.ColNum, n = 0, o = " style='width:240px;'", p = "width:184px;", 1 == d.ColNum && (o = " style='width:150px;'", p = "width:140px;"), q = "", r = 0; r < c.length; r++) if (s = $.trim(c[r].sName), "" != s || null != c[r].expression && "" != c[r].expression) { if ("" == s && (s = "advancedSearch" + ("" + r)), t = c[r].sType, u = c[r].searchDataSource, q = null == c[r].aliasTitle || "" == c[r].aliasTitle ? c[r].sTitle : c[r].aliasTitle, 0 == n % m && (l += "<tr>"), l += "<td>" + q + ":</td>", null != u) { for (l += "<td" + o + "><select id='search" + s + "' name='search" + s + "' class='SearchInput' >", v = 0; v < u.length; v++) l += "<option value='" + u[v].sValue + "'>" + u[v].sTitle + "</option>"; l += "</select>" } else "int" == t ? (l += "<td" + o + "><input id='search" + s + "Start'  class='SearchInput' name='search" + s + "Start' type='number'  style='width:82px;' />", l += 1 == d.ColNum ? "</tr><tr><td>至</td><td>" : "至", l += "<input id='search" + s + "End'  class='SearchInput' name='search" + s + "End' type='number' style='width:82px;' /></td>") : "date" == t ? (l += "<td" + o + ">", l += '<input id="search' + s + 'Start" name="search' + s + 'Start" type="text" style="width:84px;" class="Wdate SearchInput" onfocus="WdatePicker({isShowClear:true,readOnly:true,maxDate:\'#F{$dp.$D(\\\'search' + s + "End\\',{d:-0})}'})\" ></input>", l += 1 == d.ColNum ? "</tr><tr><td>至</td><td>" : "至", l += '<input id="search' + s + 'End" name="search' + s + 'End" type="text" style="width:84px;" class="Wdate SearchInput" onfocus="WdatePicker({isShowClear:true,readOnly:true,minDate:\'#F{$dp.$D(\\\'search' + s + "Start\\',{d:+0})}'})\" ></input></td>") : l += "<td" + o + "><input id='search" + s + "' class='SearchInput'  name='search" + s + "' type='text' style='" + p + "' /></td>"; n % m == m - 1 && (l += "</tr>"), n++ } for (w = (n + 1) % m, x = 0; w > x; x++) l += "<td></td><td></td>"; 0 != w && (l += "</tr>"), l += "</table></div>", i.append(l), addAdvanceSearchClick(c, b) } function addAdvanceSearchClick(a, b) { $(".SearchInput").keyup(function (a) { 13 == a.keyCode && $("#btnAdvanceSearch").click() }), $("#btnAdvanceSearch").click(function () { var e, f, c = AddAdvanceSearchCondition(a), d = b.api().ajax.url(); for (b.api().context[0].oPreviousSearch.sSearch = "", "" == $("#OriginalUrlStr").val() && $("#OriginalUrlStr").val(d), d = $("#OriginalUrlStr").val(), e = "", f = 0; f < c.Name.length; f++) f > 0 && (e += "&"), e += c.Name[f] + "=" + encodeURI(c.Value[f]); e += c.ParamsStr, d.indexOf("?") > 0 ? b.api().ajax.url(d + "&" + e) : b.api().ajax.url(d + "?" + e), b.api().ajax.reload() }), $("#btnAdvanceReSet").click(function () { ReSetAdvanceSearchCondition(a) }) } function showSearch(a) { var b = $("#txtShowSearch"); 0 == b.val() ? (b.val(1), $("#divSearch").show(), $("#divAVsearch").show(), $("#" + a + "_filter").hide(), $("#" + a + "_filter").find("input").each(function () { this.disabled = !0 })) : (b.val(0), $("#divSearch").hide(), $("#divAVsearch").hide(), $("#" + a + "_filter").show(), $("#" + a + "_filter").find("input").each(function () { this.disabled = !1 })) } function AddAdvanceSearchCondition(a) { var e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, b = "", c = [], d = []; for (d.push("myAdVanceSearchCondition"), c.push(""), e = "", f = "", g = 0; g < a.length; g++) if (h = $.trim(a[g].sName), "" != h || null != a[g].expression && "" != a[g].expression) { if (b = "", myName = "" != h ? h : "advancedSearch" + ("" + g), i = a[g].sType, j = a[g].searchDataSource, null != j) { if (k = $("#search" + myName).val(), "" != k) for (f += "&search" + myName + "=" + encodeURI(k), l = 0; l < j.length; l++) k == j[l].sValue && (e = null == j[l].expression || "" == j[l].expression ? "" : j[l].expression, b += "" == e ? " and " + h + " = '" + k + "'" : e.indexOf("#value#") > 0 ? " and " + e.replace("#value#", k) : "like" == $.trim(e.toLowerCase()) || e.length > 5 && " like" == e.toLowerCase().substring(e.length - 5, 5) ? " and " + h + " " + e + " '%" + k + "%'" : " and " + h + " " + e + " '" + k + "'") } else "int" == i ? (m = $.trim($("#search" + myName + "Start").val()), n = $.trim($("#search" + myName + "End").val()), parseFloat(m) > parseFloat(n) && (k = m, m = n, $("#search" + myName + "Start").val(m), n = k, $("#search" + myName + "End").val(k)), o = null == a[g].relationField || "" == $.trim(a[g].relationField) ? h : a[g].relationField, "" != m && (b += " and " + o + " >= " + m, f += "&search" + myName + "1=" + k), "" != n && (b += " and " + h + " <= " + n, f += "&search" + myName + "2=" + k)) : "date" == i ? (k = $.trim($("#search" + myName + "Start").val()), o = null == a[g].relationField || "" == $.trim(a[g].relationField) ? h : a[g].relationField, "" != k && (b += " and " + o + " >= '" + k + "'", f += "&search" + myName + "1=" + k), k = $.trim($("#search" + myName + "End").val()), "" != k && (p = new Date(k), isNaN(p) && (p = new Date(k.replace("-", "/"))), p.setDate(p.getDate() + 1), q = p.getFullYear() + "-" + (p.getMonth() + 1) + "-" + p.getDate(), b += " and " + h + " < '" + q + "'", f += "&search" + myName + "2=" + k)) : (k = $.trim($("#search" + myName).val()), "" != k && (f += "&search" + myName + "=" + encodeURI(k), e = null == a[g].expression || "" == $.trim(a[g].expression) ? "like" : $.trim(a[g].expression), b += e.indexOf("#value#") > 0 ? " and " + e.replace("#value#", k) : "like" == e.toLowerCase() || e.length > 5 && " like" == e.toLowerCase().substring(e.length - 5, 5) ? " and " + h + " " + e + " '%" + k + "%'" : " and " + h + " " + e + " '" + k + "'")); r = null == a[g].CustomParam || "" == a[g].CustomParam ? 0 : $.inArray(a[g].CustomParam, d), -1 == r && (d.push(a[g].CustomParam), c.push(""), r = d.length - 1), "" != b && (s = "" == c[r] ? " 1=1 " : "", c[r] += s + b) } return t = {}, t.Name = d, t.Value = c, t.ParamsStr = f, t } function ReSetAdvanceSearchCondition(a) { var b, c, d, e; for (b = 0; b < a.length; b++) c = $.trim(a[b].sName), ("" != c || null != a[b].expression && "" != a[b].expression) && (myName = "" != c ? c : "advancedSearch" + ("" + b), d = a[b].sType, e = a[b].searchDataSource, null != e ? $("#search" + myName).val("") : "int" == d ? ($("#search" + myName + "Start").val(""), $("#search" + myName + "End").val("")) : "date" == d ? ($("#search" + myName + "Start").val(""), $("#search" + myName + "End").val("")) : $("#search" + myName).val("")) } var avSearchWidth = 260;